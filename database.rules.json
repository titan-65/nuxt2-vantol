{
    "rules": {
        "posts": {
            ".read": "auth != null",
            "$slug": {
                "views": {
                    ".read": true,
                    ".write": true
                },
                "presence": {
                    ".read": true,
                    "$visitorId": {
                        ".write": true
                    }
                },
                "comments": {
                    ".read": true,
                    "$commentId": {
                        ".write": "auth != null && (!data.exists() || data.child('authorEmail').val() === auth.token.email)"
                    }
                },
                "likes": {
                    ".read": true,
                    "$visitorId": {
                        ".write": true
                    }
                }
            }
        },
        "subscribers": {
            ".read": "auth != null",
            ".indexOn": [
                "subscribedAt"
            ],
            "$emailHash": {
                ".write": true
            }
        }
    }
}